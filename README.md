Виджет вставляется в страницу стандартно:
<? $this->widget('application.widgets.banners.TopBanner' ?>

Есть 4 рекламных места, для каждого -- свой виджет: TopBanner,
BottomBanner, RightBanner, MiddleBanner

Виджет выводит баннер, который может быть:
1. GIF, PNG, JPG
2. Flash
3. HTML-код

Для первого вида баннеров можно задать URL, по которому будет
происходить переход при клике. Для таких баннеров нужно учитывать
количество кликов, при этом URL должен быть спрятан от пользователя (с
помощью контроллера, который будет редиректить такие баннеры).

Для всех баннеров нужно считать количество показов.

На одном баннерном месте могут выводиться несколько баннеров. Какой
выводить в данный момент, определяем путем псевдослучайной выборки.

Вся информация о баннерах хранится в БД, файлы GIF, PNG, JPG и SWF -- на диске.

В специальной панели можно посмотреть, какие баннеры на данный момент
существуют в системе, удалить, отредактировать параметры, добавить
новые баннеры.

Для каждого баннера можно задать:
1. Место/места, где он будет выводиться (top, bottom, right, middle).
2. Contoller и/или action.
3. Параметры из URL, страницы, на которой вызывается виджет. Этих
параметров -- три: $_GET['propertyType'], $_GET['dealKind'],
$_GET['dealDirection']. Они парсятся из URL вида
http://mysite.com/residential/sale/offer/3452.html, где
$_GET['propertyType'] = 'residential', $_GET['dealKind'] = 'sale',
$_GET['dealDirection'] = 'offer'. (Соответственно, надо создать
контроллер с минимальной функциональностью, который вызывался бы по
подобному адресу, а его отображение вставляло бы пару виджетов с
баннерами, соответтвующими запросу.)

Таким образом, можно добавить в систему баннер, который будет
отображаться во всех экшенах контроллера AdsController в позициях top
и bottom, для всех запросов с предложениями по продаже и аренде жилой
недвижимости ($_GET['propertyType'] = 'residential',
$_GET['dealDirection'] = 'offer'). Другой пример: баннер, который
будет отображаться в позиции top экшена actionList() контроллера
AdsController.
Эти примеры показывают, что на позицию top по адресу
http://mysite.com/residential/sale/offer/list.html претендуют два
баннера. Из них мы уже делаем random-выбор.

Возможные значения параметров запроса (просто, чтобы голову не ломать)
propertyType: residential, commercial, land, garage
dealKind: sale, rent
dealDirection: offer, demand